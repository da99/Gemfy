#!/usr/bin/env ruby
# -*- ruby -*-
# 


require "Gemfy"

if ARGV.first == 'create' && ARGV.size == 2
  raise "Too many arguments: #{ARGV}" unless ARGV.size == 2
  g = Gemfy.new(ARGV[1])
  g.create
elsif ARGV.first == 'bacon'
  ARGV.shift
  
  # From:
  # http://stackoverflow.com/a/2966988/841803
  new_args = ARGV.map { |ele|  
    if ele[' ']
      ele.inspect
    else
      ele
    end
  }.join(' ')
  cmd = "bundle exec bacon spec/main.rb #{new_args}"
  puts cmd
  exec cmd
  
elsif ARGV.first == 'all'
  ARGV.shift
  Gemfy.all *ARGV

else
  g = Gemfy.new(File.basename(File.expand_path('.')))
  g.send *ARGV
  
end # === if

