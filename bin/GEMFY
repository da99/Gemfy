#!/usr/bin/env ruby
# -*- ruby -*-
# 


require "Gemfy"

case ARGV.first
when 'create'
  raise "Too many arguments: #{ARGV}" unless ARGV.size == 2
  g = Gemfy.new(ARGV[1])
  g.create
when 'bacon'
  ARGV.shift
  new_args = ARGV.map { |ele|  
    if ele[' ']
      ele.inspect
    else
      ele
    end
  }.join(' ')
  cmd = "bundle exec bacon spec/main.rb #{new_args}"
  puts cmd
  exec cmd
when 'all'
  ARGV.shift
  Gemfy.all *ARGV
else
  g = Gemfy.new(File.basename(File.expand_path('.')))
  g.send *ARGV
end
